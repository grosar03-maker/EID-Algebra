{% extends "base.html" %}
{% block contenido %}
<div class="text-center mb-4">
    <h2>Generador de Superficies 3D</h2>
    <p class="text-muted">Introduce una funci√≥n de dos variables, ej: <code>x**2 + y**2</code></p>
</div>
<div class="row justify-content-center">
    <div class="col-md-6">
        <form method="POST" class="input-group mb-4">
            <input type="text" class="form-control" name="funcion" placeholder="Ej: sin(x)*cos(y)" value="{{ func_prev }}" required>
            <button class="btn btn-warning">Generar 3D</button>
        </form>
    </div>
</div>
{% if datos %}
    {% if datos.error %}
        <div class="alert alert-danger text-center">{{ datos.error }}</div>
    {% else %}
        <div class="card shadow">
            <div class="card-body">
                <div id="plot3d" style="width:100%; height:600px;"></div>
            </div>
        </div>
        <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
        <script>
            Plotly.newPlot('plot3d', [{
                z: {{ datos.z | tojson }},
                x: {{ datos.x | tojson }},
                y: {{ datos.y | tojson }},
                type: 'surface', colorscale: 'Viridis'
            }], { title: '{{ func_prev }}', autosize: true, margin: {l:0, r:0, b:0, t:30} });
        </script>
    {% endif %}
{% endif %}
{% endblock %}